<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cajero Bancario Verde</title>

<style>
:root{
  --accent:#22c55e;
  --accent-dark:#166534;
  --err:#dc2626;
  --muted:#6b7280;
  font-family: Inter, system-ui, sans-serif;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(180deg,#dcfce7,#f0fdf4);
  display:flex;
  align-items:center;
  justify-content:center;
}
.container{
  width:420px;
  border-radius:20px;

  /* EFECTO CRISTAL */
  background:rgba(255,255,255,.35);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);

  box-shadow:
    0 8px 32px rgba(0,0,0,.25),
    inset 0 0 0 1px rgba(255,255,255, 10);

  padding:28px;
  text-align:center;

  animation:zoom .5s ease;
}
.container:hover{
  box-shadow:
    0 12px 40px rgba(0,0,0,.3),
    inset 0 0 0 1px rgba(255,255,255,85);
}



/* ===== EFECTOS ===== */
.container > div{
  animation:fadeSlide .4s ease;
}
@keyframes fadeSlide{
  from{opacity:0; transform:translateY(15px)}
  to{opacity:1; transform:translateY(0)}
}
@keyframes zoom{
  from{transform:scale(.95); opacity:.5}
  to{transform:scale(1); opacity:1}
}

/* ===== TEXTOS ===== */
h1,h2{color:var(--accent-dark)}
p{color:var(--muted)}

input{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #bbf7d0;
  margin:12px 0;
  outline:none;
  transition:.3s;
}
input:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px #bbf7d0;
}

/* ===== BOTONES ===== */
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:10px;
  background:var(--accent);
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
}
button:hover{background:#16a34a}
button:active{transform:scale(.96)}

.menu button{
  background:white;
  color:var(--accent-dark);
  border:1px solid #bbf7d0;
}
.menu button:hover{
  background:#dcfce7;
}

.hidden{display:none}
.balance{font-size:28px;font-weight:800}

.success{color:#166534}
.error{color:#991b1b}



/* ===== FONDO DIAGONAL ANIMADO ===== */
.bg{
  animation:slide 4s ease-in-out infinite alternate;
  background-image:linear-gradient(-60deg,#004A9E 50%,#009E69 50%);
  bottom:0;
  left:-50%;
  opacity:.35;
  position:fixed;
  right:-50%;
  top:0;
  z-index:-2;
}

.bg2{
  animation-direction:alternate-reverse;
  animation-duration:6s;
  opacity:.25;
}

.bg3{
  animation-duration:8s;
  opacity:.2;
}

@keyframes slide{
  0%{transform:translateX(-25%)}
  100%{transform:translateX(25%)}
}


</style>
</head>

<body>

  <!-- FONDO ANIMADO -->
<div class="bg"></div>
<div class="bg bg2"></div>
<div class="bg bg3"></div>


<div class="container">

<!-- BIENVENIDA -->
<div id="bienvenida">
  <h1>Bienvenido</h1>
  <p>Ingresa tu NIP</p>
  <input id="nip" type="password">
  <button onclick="login()">Entrar</button>
  <div id="msg"></div>
</div>

<!-- MENU -->
<div id="menu" class="hidden">
  <h2 id="nombre"></h2>
  <p>¿Qué deseas hacer?</p>
  <div class="menu">
    <button onclick="ir('saldo')">Consultar saldo</button>
    <button onclick="ir('deposito')">Depositar</button>
    <button onclick="ir('retiro')">Retirar</button>
    <button onclick="salir()">Salir</button>
  </div>
</div>

<!-- SALDO -->
<div id="saldo" class="hidden">
  <h2>Saldo disponible</h2>
  <div class="balance" id="saldoTexto"></div>
  <button onclick="finalizar()">Continuar</button>
</div>

<!-- DEPOSITO -->
<div id="deposito" class="hidden">
  <h2>Depósito</h2>
  <input id="depMonto" type="number" placeholder="Monto">
  <button onclick="depositar()">Confirmar</button>
</div>

<!-- RETIRO -->
<div id="retiro" class="hidden">
  <h2>Retiro</h2>
  <input id="retMonto" type="number" placeholder="Monto">
  <button onclick="retirar()">Confirmar</button>
</div>

<!-- MENSAJE -->
<div id="mensaje" class="hidden">
  <h2 id="tituloMensaje"></h2>
  <p id="textoMensaje"></p>
  <button onclick="continuarDesdeMensaje()">Continuar</button>
</div>

<!-- CONFIRMACION -->
<div id="continuar" class="hidden">
  <h2>¿Deseas realizar otra operación?</h2>
  <button onclick="volverMenu()">Sí</button>
  <button onclick="despedida()">No</button>
</div>

<!-- ADIOS -->
<div id="adios" class="hidden">
  <h1>Sesión finalizada</h1>
  <p>Gracias por usar el cajero</p>
</div>

</div>

<script>
// ===== CUENTAS INICIALES =====
const defaultUsers={
  "0000":{name:"Naim",balance:5000},
  "1111":{name:"Génesis",balance:3200},
  "2222":{name:"Alex",balance:7800},
  "3333":{name:"Alex",balance:4100},
  "4444":{name:"Sebastian",balance:2600},
  "5555":{name:"Oscar",balance:9800},
  "6666":{name:"Alejandro",balance:5300},
  "7777":{name:"Alexys",balance:1500}
};

// ===== MEMORIA =====
let users = JSON.parse(localStorage.getItem("bankUsers")) || defaultUsers;
let user=null;
let intentos=0;
let volverA="menu";

function guardar(){
  localStorage.setItem("bankUsers", JSON.stringify(users));
}

function mostrar(id){
  document.querySelectorAll(".container > div")
    .forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

function money(n){
  return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(n);
}

function login(){
  if(intentos>=3){
    msg.innerHTML="<p class='error'>Cuenta bloqueada</p>";
    return;
  }
  const nip=document.getElementById("nip").value;
  if(users[nip]){
    user=users[nip];
    intentos=0;
    nombre.textContent=`Hola, ${user.name}`;
    mostrar("menu");
  }else{
    intentos++;
    msg.innerHTML=
      intentos>=3
      ? "<p class='error'>Cuenta bloqueada</p>"
      : `<p class='error'>NIP incorrecto (${intentos}/3)</p>`;
  }
}

function ir(op){
  if(op==="saldo"){
    saldoTexto.textContent=money(user.balance);
  }
  mostrar(op);
}

function depositar(){
  let m=parseFloat(depMonto.value);
  if(m>0){
    user.balance+=m;
    guardar();
    volverA="menu";
    mostrarMensaje("Depósito exitoso",
      `Se depositaron ${money(m)} correctamente.`,
      "success");
    depMonto.value="";
  }
}

function retirar(){
  let m=parseFloat(retMonto.value);
  if(m>0 && m<=user.balance){
    user.balance-=m;
    guardar();
    volverA="menu";
    mostrarMensaje("Retiro exitoso",
      `Se retiraron ${money(m)} correctamente.`,
      "success");
    retMonto.value="";
  }else{
    volverA="retiro";
    mostrarMensaje("Saldo insuficiente",
      "No cuentas con saldo suficiente.",
      "error");
  }
}

function mostrarMensaje(titulo,texto,clase){
  tituloMensaje.textContent=titulo;
  textoMensaje.textContent=texto;
  tituloMensaje.className=clase;
  mostrar("mensaje");
}

function continuarDesdeMensaje(){
  mostrar(volverA);
}

function finalizar(){mostrar("continuar")}
function volverMenu(){mostrar("menu")}
function salir(){despedida()}
function despedida(){
  mostrar("adios");
  setTimeout(()=>location.reload(),3000);
}
</script>

</body>
</html>

